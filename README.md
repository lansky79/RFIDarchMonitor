# 档案库房智能监测系统

一个集成环境监测、RFID 设备管理、档案定位追踪、智能盘点、异常告警、数据统计和设备维护等功能的综合性档案管理系统。

## 系统特点

- **简单易用**：采用 Python Flask + 原生 HTML/CSS/JS 技术栈，简单易调试
- **快速开发**：支持快速原型开发，适合软著申请需求
- **无硬编码**：所有配置参数和业务数据采用持久化存储
- **桌面应用**：基于 Web 的桌面端应用架构

## 功能模块

### 1. 环境监测管理

- 实时监测温湿度、光照等环境参数
- 环境数据历史查询和趋势分析
- 环境异常自动告警

### 2. RFID 设备管理

- RFID 读写器配置和管理
- RFID 标签信息管理
- 设备状态监控和连接测试

### 3. 档案定位追踪

- 档案位置实时记录和查询
- 档案移动历史轨迹追踪
- 异常移动检测和告警

### 4. 智能盘点系统

- 桌面端批量档案盘点
- 盘点报告生成和导出
- 缺失档案和多余档案统计

### 5. 异常告警管理

- 环境异常和档案移动告警
- 告警历史记录和处理跟踪
- 自定义告警规则配置

### 6. 数据统计报表

- 环境趋势分析报表
- 档案流动统计报表
- 多维度数据筛选和导出

### 7. 设备维护记录

- 传感器和 RFID 设备维护管理
- 维护计划制定和提醒
- 设备故障历史和成本统计

### 8. 系统参数配置

- 告警阈值配置
- RFID 参数设置
- 系统配置备份和恢复

## 技术架构

### 后端技术栈

- **Python 3.8+**：主要开发语言
- **Flask**：轻量级 Web 框架
- **SQLite**：嵌入式数据库
- **pyserial**：串口通信库
- **APScheduler**：定时任务调度

### 前端技术栈

- **HTML5 + CSS3**：页面结构和样式
- **原生 JavaScript**：业务逻辑处理
- **Bootstrap 5**：UI 组件库
- **Chart.js**：图表展示库

### 项目结构

```
archive-monitoring-system/
├── backend/                 # 后端代码
│   ├── app.py              # Flask主应用
│   ├── config.py           # 配置管理
│   ├── database.py         # 数据库操作
│   ├── models/             # 数据模型
│   ├── services/           # 业务服务
│   └── api/                # API接口
├── frontend/               # 前端代码
│   ├── index.html          # 主页面
│   ├── css/                # 样式文件
│   ├── js/                 # JavaScript文件
│   └── pages/              # 功能页面
├── data/                   # 数据文件
├── logs/                   # 日志文件
└── requirements.txt        # Python依赖
```

## 快速开始

### 1. 环境准备

确保系统已安装 Python 3.8 或更高版本：

```bash
python --version
```

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 启动系统

```bash
cd backend
python app.py
```

### 4. 访问系统

打开浏览器访问：http://127.0.0.1:5000

## 开发调试

### 前端调试

- 修改 HTML/CSS/JS 文件后，直接刷新浏览器即可看到更改
- 使用浏览器开发者工具进行调试

### 后端调试

- 修改 Python 代码后，按 Ctrl+C 停止服务，然后重新运行`python app.py`
- 查看控制台输出和日志文件进行调试

### 数据库管理

- 数据库文件位置：`data/archive_system.db`
- 可使用 SQLite Browser 等工具进行可视化管理
- 系统启动时会自动创建数据库和表结构

## 配置说明

### 环境变量配置

可通过环境变量自定义系统配置：

```bash
# 服务器配置
export FLASK_HOST=127.0.0.1
export FLASK_PORT=5000
export FLASK_DEBUG=True

# 数据库配置
export DATABASE_PATH=data/archive_system.db

# 硬件设备配置
export SENSOR_SCAN_INTERVAL=30
export RFID_SCAN_INTERVAL=5

# 告警阈值配置
export DEFAULT_TEMP_MIN=18.0
export DEFAULT_TEMP_MAX=25.0
export DEFAULT_HUMIDITY_MIN=40.0
export DEFAULT_HUMIDITY_MAX=60.0
```

### 系统配置

系统运行后，可通过"系统配置"页面进行参数调整，所有配置都会保存到数据库中。

## 硬件接口

### 支持的传感器

- 温湿度传感器（串口通信）
- 光照强度传感器（串口通信）
- 其他环境传感器（可扩展）

### 支持的 RFID 设备

- 串口通信的 RFID 读写器
- 网络通信的 RFID 读写器
- 支持多种 RFID 标签协议

## 数据备份

系统提供自动数据备份功能：

- 数据库文件自动备份到`data/backups/`目录
- 支持手动备份和定时备份
- 备份文件包含完整的系统数据

## 故障排除

### 常见问题

1. **无法启动服务**

   - 检查 Python 版本和依赖安装
   - 确认端口 5000 未被占用
   - 查看错误日志：`logs/app.log`

2. **前端无法连接后端**

   - 确认后端服务正常运行
   - 检查防火墙设置
   - 验证 API 地址配置

3. **数据库错误**

   - 检查数据目录权限
   - 确认 SQLite 安装正确
   - 删除数据库文件重新初始化

4. **硬件设备连接失败**
   - 检查串口设备连接
   - 验证设备驱动安装
   - 确认串口参数配置

## 开发计划

- [x] 项目基础架构搭建
- [ ] 环境监测功能开发
- [ ] RFID 设备管理功能
- [ ] 档案追踪功能
- [ ] 智能盘点系统
- [ ] 告警管理系统
- [ ] 统计报表功能
- [ ] 设备维护管理
- [ ] 系统配置管理
- [ ] 系统集成测试

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 联系方式

如有问题或建议，请通过以下方式联系：

- 项目地址：[GitHub 仓库地址]
- 邮箱：[联系邮箱]

---

**档案库房智能监测系统** - 让档案管理更智能、更高效！
